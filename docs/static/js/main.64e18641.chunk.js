(this.webpackJsonpmyNotes=this.webpackJsonpmyNotes||[]).push([[0],{108:function(e,t){},133:function(e,t,n){"use strict";n.r(t);var c,a,r=n(6),s=n(32),o=n.n(s),i=(n(84),n(18)),l=Object(r.createContext)(),u=Object(r.createContext)(),j=n(8),b=function(){var e=Object(r.useContext)(u),t=(e.auth,e.logOut),n=Object(r.useContext)(l).hide,c=Object(i.f)();return localStorage.getItem("user")?Object(j.jsx)("nav",{className:"navbar navbar-dark navbar-expand-lg",children:Object(j.jsxs)("div",{className:"navbar-box d-flex justify-content-between",children:[Object(j.jsx)("div",{className:"navbar-brand",children:"MY NOTES"}),Object(j.jsxs)("div",{className:"userName d-flex align-items-center",children:[Object(j.jsxs)("p",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",JSON.parse(localStorage.getItem("user")).displayName]}),Object(j.jsx)("button",{className:"outBtn btn btn-outline-light",type:"submit",onClick:function(){t(),n(),c.push("/auth")},children:"\u0412\u044b\u0439\u0442\u0438"})]})]})}):""},d=n(14),O=n(0),p=n.n(O),f=n(1),x=n(12),h=n(43),m=n.n(h),g=n(44),v=n.n(g),y=n(5),N=n(16),C="ADD_NOTE",S="GET_NOTES",k="REMOVE_NOTE",T="SHOW_LOADER",w="HIDE_LOADER",E="GET_CURRENT_NOTE",I="EDIT_NOTE",_="HIDE_ALERT",J="SHOW_ALERT",F="CHECK_LOGIN",D="CHECK_LOGOUT",A=(c={},Object(y.a)(c,T,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0})})),Object(y.a)(c,w,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})})),Object(y.a)(c,F,(function(e){return Object(d.a)(Object(d.a)({},e),{},{check:!0})})),Object(y.a)(c,D,(function(e){return Object(d.a)(Object(d.a)({},e),{},{check:!1,notes:[]})})),Object(y.a)(c,C,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{notes:[].concat(Object(N.a)(e.notes),[n])})})),Object(y.a)(c,k,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{notes:e.notes.filter((function(e){return e.id!==n}))})})),Object(y.a)(c,I,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{notes:e.notes.map((function(e){return e.id==n.id?n:e}))})})),Object(y.a)(c,S,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{notes:n,loading:!1})})),Object(y.a)(c,E,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{currentNote:n})})),Object(y.a)(c,"DEFAULT",(function(e){return e})),c),L=function(e,t){return(0,A[t.type||A.DEFAULT])(e,t)},R=n(76),B=n(34),U=n(77),H=n(78),M=function(e){var t=e.children,n=Object(R.a)({apiKey:"AIzaSyCpO_kNHjTh6LJXNNDHPmuJ4u90fmt7v08",authDomain:"mynotes-e2d75.firebaseapp.com",databaseURL:"https://mynotes-e2d75-default-rtdb.firebaseio.com",projectId:"mynotes-e2d75",storageBucket:"mynotes-e2d75.appspot.com",messagingSenderId:"605851805430",appId:"1:605851805430:web:56bb1fbe61abb2efea2ed7"}),c=Object(B.b)(),a=new B.a,s=Object(U.a)(),o=Object(H.a)(c),i=Object(x.a)(o,1)[0],l="https://mynotes-e2d75-default-rtdb.firebaseio.com",b=Object(r.useReducer)(L,{notes:[],currentNote:"null",loading:!1,check:!1}),O=Object(x.a)(b,2),h=O[0],g=O[1],y=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.c)(c,a).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),m.a.patch("".concat(l,"/users/").concat(e.user.uid,".json?auth=").concat(JSON.parse(localStorage.getItem("user")).stsTokenManager.accessToken),{email:e.user.email,name:e.user.displayName})})).catch((function(e){console.log(e)}));case 2:g({type:F});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.d)(c).then((function(){console.log("logOut successful"),localStorage.removeItem("user")}));case 2:g({type:D});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:T}),e.prev=1,e.next=4,m.a.get("".concat(l,"/users/").concat(JSON.parse(localStorage.getItem("user")).uid,"/notes.json?auth=").concat(JSON.parse(localStorage.getItem("user")).stsTokenManager.accessToken));case 4:if(null!=(t=e.sent).data){e.next=8;break}return g({type:w}),e.abrupt("return");case 8:n=Object.keys(t.data).map((function(e){return Object(d.a)(Object(d.a)({},t.data[e]),{},{id:e})})),g({type:S,payload:n}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.message.includes("401")&&N();case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var c,a,r,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){return e.split("-").reverse().join("-")},a=v.a.AES.encrypt(n,"note").toString(),r={title:t,text:a,date:c((new Date).toJSON().substr(0,10)).replace(/-/g,".")},e.prev=3,console.log("\u041f\u044b\u0442\u0430\u044e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440..."),e.next=7,m.a.post("".concat(l,"/users/").concat(JSON.parse(localStorage.getItem("user")).uid,"/notes.json?auth=").concat(JSON.parse(localStorage.getItem("user")).stsTokenManager.accessToken),r);case 7:s=e.sent,o=Object(d.a)(Object(d.a)({},r),{},{id:s.data.name}),g({type:C,payload:o}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),new Error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(l,"/users/").concat(JSON.parse(localStorage.getItem("user")).uid,"/notes/").concat(t,".json?auth=").concat(JSON.parse(localStorage.getItem("user")).stsTokenManager.accessToken));case 2:g({type:k,payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(p.a.mark((function e(t,n,c,a){var r,s,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.AES.encrypt(a,"note").toString(),s={id:t,date:n,title:c,text:r},e.prev=2,console.log("\u041f\u044b\u0442\u0430\u044e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440..."),e.next=6,m.a.put("".concat(l,"/users/").concat(JSON.parse(localStorage.getItem("user")).uid,"/notes/").concat(t,".json?auth=").concat(JSON.parse(localStorage.getItem("user")).stsTokenManager.accessToken),Object(d.a)({},s));case 6:o=e.sent,i=Object(d.a)({},s),console.log(o),g({type:I,payload:i}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),new Error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n,c,a){return e.apply(this,arguments)}}();return Object(j.jsx)(u.Provider,{value:{loading:h.loading,notes:h.notes,currentNote:h.currentNote,check:h.check,login:y,logOut:N,addNote:J,getNotes:_,getCurrentNote:function(e){var t=Object(d.a)({},e);g({type:E,payload:t})},editNote:M,removeNote:A,firebase:n,auth:c,firestore:s,user:i,signInWithPopup:B.c,signOut:B.d,provider:a,CryptoJS:v.a,decrypt:function(e){return v.a.AES.decrypt(e,"note").toString(v.a.enc.Utf8)}},children:t})},P=n(41),G=function(){var e=Object(r.useContext)(l),t=e.alert,n=e.hide;return Object(P.useTransition)(t.visible,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:400}})((function(e,c){return c&&Object(j.jsx)(P.animated.div,{style:e,children:Object(j.jsxs)("div",{class:"alert alert-".concat(t.type||"warning"," alert-dismissible fade show"),role:"alert",children:[t.text,Object(j.jsx)("button",{onClick:n,type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]})})}))},K=n(136),W=n(135),Y=function(e){var t=e.notes,n=Object(r.useContext)(u),c=n.getCurrentNote,a=n.removeNote,s=n.decrypt,o=Object(r.useContext)(l),b=o.show,d=o.hide,O=Object(i.f)();return Object(j.jsx)("div",{class:"cards__container d-flex flex-wrap justify-content-center",children:Object(j.jsx)(K.a,{component:null,children:t.map((function(e){return Object(j.jsx)(W.a,{timeout:500,classNames:"card",children:Object(j.jsxs)("div",{class:"card text-dark bg-light mb-3",onClick:function(){c(e),d(),O.push("/note")},children:[Object(j.jsxs)("div",{class:"card-header d-flex justify-content-between align-items-center",children:[e.date,Object(j.jsx)("button",{class:"btn-close",onClick:function(t){t.stopPropagation(),a(e.id).then((function(){b("\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430...","success")})),console.log("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438...")},type:"button","aria-label":"Close"})]}),Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsx)("h5",{class:"card-title",children:e.title}),Object(j.jsx)("p",{class:"card-text",children:s(e.text)})]})]})},e.id)}))})})},z=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(x.a)(a,2),o=s[0],i=s[1],b=Object(r.useContext)(u),d=Object(r.useContext)(l).show;console.log(n,o);return Object(j.jsxs)("div",{class:"note-form",children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"exampleFormControlInput1",class:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438:"}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438",autocomplete:"off",value:n,onChange:function(e){c(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"exampleFormControlTextarea1",class:"form-label",children:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438:"}),Object(j.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442...",value:o,onChange:function(e){i(e.target.value)}})]}),Object(j.jsx)("div",{class:"btnBox",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),n.trim()?(b.addNote(n.trim(),o.trim()).then((function(){console.log("\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0431\u044b\u043b\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),d("\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0431\u044b\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430","success")})).catch((function(){console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),d("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430","danger")})),c(""),i("")):(console.log("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),d("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"))},type:"button",class:"addBtn btn btn-lg",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443"})})]})},V=function(){return Object(j.jsx)("div",{className:"text-center",children:Object(j.jsx)("div",{class:"spinner-border text-secondary",role:"status",children:Object(j.jsx)("span",{class:"sr-only"})})})},X=function(){var e=Object(r.useContext)(u),t=e.auth,n=e.user,c=e.check,a=e.login,s=Object(i.f)();return Object(r.useEffect)((function(){console.log("\u0421\u0440\u0430\u0431\u043e\u0442\u0430\u043b \u043c\u0435\u0442\u043e\u0434 useEffect"),console.log(t),localStorage.getItem("user")?(console.log("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c"),console.log(n)):(console.log(n),console.log("\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"))}),[c]),Object(j.jsx)("div",{className:"auth",children:Object(j.jsxs)("div",{className:"auth_inner container",children:[Object(j.jsx)("div",{className:"auth_img",children:Object(j.jsx)("img",{src:"/img/1.jpg"})}),Object(j.jsxs)("div",{className:"auth_form d-flex flex-column justify-content-center align-items-center",children:[Object(j.jsx)("div",{className:"auth_title",children:"MY NOTES"}),Object(j.jsx)("div",{className:"auth_subtitle",children:"\u041d\u0435\u043f\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043b\u0443\u0447\u0448\u0438\u0445 \u0440\u0435\u0448\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043e\u043a"}),Object(j.jsx)("button",{class:"authBtn btn",type:"submit",onClick:function(){a().then((function(){return s.push("/")}))},children:"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Google"})]})]})})},q=function(){var e=Object(r.useContext)(u),t=e.notes,n=e.getNotes,c=e.loading;return Object(r.useEffect)((function(){localStorage.getItem("user")&&n()}),[]),localStorage.getItem("user")?Object(j.jsx)(r.Fragment,{children:Object(j.jsxs)("div",{className:"container",style:{height:"90vh"},children:[Object(j.jsx)(G,{}),Object(j.jsx)(z,{}),Object(j.jsx)("hr",{}),c?Object(j.jsx)(V,{}):Object(j.jsx)(Y,{notes:t})]})}):Object(j.jsx)(X,{})},Q=function(e){var t,n=e.currentNote,c=Object(r.useContext)(u).CryptoJS;return Object(j.jsx)("section",{class:"currentNote",children:Object(j.jsx)("div",{class:"container",children:Object(j.jsx)("div",{class:"row justify-content-center",children:Object(j.jsxs)("div",{class:"col col-md-8",children:[Object(j.jsx)("h1",{class:"mb-3 currentnote_title",children:n.title}),Object(j.jsx)("p",{class:"currentnote_text",children:(t=n.text,c.AES.decrypt(t,"note").toString(c.enc.Utf8))})]})})})})},Z=function(e){var t=e.currentNote,n=Object(r.useContext)(u),c=Object(r.useState)(t.title),a=Object(x.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)(n.decrypt(t.text)),b=Object(x.a)(i,2),d=b[0],O=b[1],p=Object(r.useContext)(l).show;return Object(j.jsxs)("div",{class:"note-form",children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"exampleFormControlInput1",class:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438:"}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438",value:s,onChange:function(e){o(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"exampleFormControlTextarea1",class:"form-label",children:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438:"}),Object(j.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442...",value:d,onChange:function(e){O(e.target.value)}})]}),Object(j.jsx)("div",{class:"btnBox",children:Object(j.jsx)("button",{onClick:function(){n.editNote(t.id,t.date,s,d).then((function(){p("\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0431\u044b\u043b\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430","success")}))},type:"button",class:"addBtn btn btn-lg",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})})]})},$=function(){var e=Object(r.useContext)(u).currentNote,t=Object(i.f)(),n=Object(r.useState)(!1),c=Object(x.a)(n,2),a=c[0],s=c[1];return Object(j.jsxs)("div",{className:"container",style:{height:"90vh"},children:[Object(j.jsx)(G,{}),a?Object(j.jsx)(Z,{currentNote:e}):Object(j.jsx)(Q,{currentNote:e}),Object(j.jsxs)("div",{class:"btn_group d-flex justify-content-center ",children:[Object(j.jsxs)("div",{class:"btn_back",onClick:function(){return t.push("/")},children:[Object(j.jsx)("img",{src:"/img/left-arrow.png"}),"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"]}),Object(j.jsx)("div",{class:"v_border"}),Object(j.jsxs)("div",{class:"btn_edit d-flex",onClick:function(){s(!0)},children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"/img/pencil.png"})}),"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"]})]})]})},ee=(a={},Object(y.a)(a,J,(function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},n),{},{visible:!0})})),Object(y.a)(a,_,(function(e){return Object(d.a)(Object(d.a)({},e),{},{visible:!1})})),Object(y.a)(a,"DEFAULT",(function(e){return e})),a),te=function(e,t){return(ee[t.type]||ee.DEFAULT)(e,t)},ne=function(e){var t=e.children,n=Object(r.useReducer)(te,{visible:!1}),c=Object(x.a)(n,2),a=c[0],s=c[1];return Object(j.jsx)(l.Provider,{value:{show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";s({type:J,payload:{text:e,type:t}})},hide:function(){s({type:_})},alert:a},children:t})},ce=function(){return Object(j.jsx)(X,{})};var ae=function(){var e=Object(i.g)();console.log(e);var t=Object(P.useTransition)(e,{from:{opacity:0},enter:{opacity:1,position:"relative"},leave:{opacity:0,display:"none"},config:{duration:350}});return Object(j.jsx)(M,{children:Object(j.jsxs)(ne,{children:[Object(j.jsx)(b,{}),t((function(e,t){return Object(j.jsx)(P.animated.div,{style:e,children:Object(j.jsx)("div",{style:{position:"absolute",width:"100%"},children:Object(j.jsxs)(i.c,{location:t,children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:q}),Object(j.jsx)(i.a,{exact:!0,path:"/auth",component:ce}),Object(j.jsx)(i.a,{exact:!0,path:"/note",component:$})]})})})}))]})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},se=n(38);o.a.render(Object(j.jsx)(se.a,{children:Object(j.jsx)(ae,{})}),document.getElementById("root")),re()},84:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.64e18641.chunk.js.map